# Transitions

A transition is a change from one finite state to another, triggered by an event.

<!-- TODO: example going from form to closed -->

When a state machine receives an event, only the active finite states are checked to see if any of them have a transition for that event. Those transitions are called **enabled transitions**. If there is an enabled transition, the state machine will execute the transition's actions, and then transition to the target state.

Transitions are represented by `on:` in a state:

<!-- TODO: full feedback example -->

## Stately Editor: transitions

## Self-transitions

A state can transition to itself. This is known as a **self-transition**, and is useful for changing context and/or executing actions without changing the finite state.

<!-- TODO: assign example -->

## Transitions between states

Typically, transitions are between two sibling states.

<!-- TODO: example with `{ on: { target: 'sibling' } }` -->

## Parent to child transitions

When a state machine receives an event, it will first check the deepest state (aka atomic state) to see if there is any enabled transition. If not, the parent state is checked, and so on until the root state is reached.

When an event should transition to a state regardless of which sibling state is active, a useful pattern is to transition from the parent state to the child state.

<!-- TODO: example with `{ on: { target: '.child' } }` -->

## Reentering

By default, when a state machine transitions from a parent state to the same parent state or a descendent (child or deeper), it will not reenter the parent state; that is, it will not execute the `exit` and `entry` actions of the parent state (TODO: link for actions).

If reentering is desired, the `reenter` property can be set to `true`. This will cause the parent state to reenter, executing the `exit` and `entry` actions of the parent state.

<!-- TODO: illustration showing no reenter vs. reenter -->

<!-- TODO: example with `{ target: '.child', reenter: true }` -->

## Transitions to any state

Sibling descendent states: `{ target: 'sibling.child.grandchild' }`

Parent to descendent states: `{ target: '.child.grandchild' }`

State to any state: `{ target: '#specificState' }`

## Wildcard transitions

A wildcard transition is a transition that will match any event. The event descriptor (key of the `on: {...}` object) is defined using the `*` wildcard character as the event type:

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'asleep',
  states: {
    asleep: {
      on: {
        // highlight-start
        // This transition will match any event
        '*': { target: 'awake' },
        // highlight-end
      },
    },
    awake: {},
  },
});
```

Wildcard transitions are useful for handling events that are not handled by any other transition, or as a "catch-all" transition that handles any event in a state. A wildcard transition has the least priority; it will only be taken if no other transitions are enabled.

## Partial wildcard transitions

A partial wildcard transition is a transition that machines any event that starts with a specific prefix. The event descriptor is defined by using the wildcard character (`*`) after a dot (`.`) as the event type:

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'prompt',
  states: {
    prompt: {
      on: {
        // highlight-start
        // This will match any event that starts with 'feedback.':
        // 'feedback.good', 'feedback.bad', etc.
        'feedback.*': { target: 'form' },
        // highlight-end
      },
    },
    form: {},
    // ...
  },
});
```

The wildcard character (`*`) can only be used in the suffix of an event descriptor, following a dot (`.`). Some examples:

- ✅ `mouse.*` - matches `mouse.click`, `mouse.move`, etc.
- ✅ `mouse.click.*` - matches `mouse.click.left`, `mouse.click.right`, etc.
- ❌ ~~`mouse*`~~ - invalid; does not match any event
- ❌ ~~`mouse.*.click`~~ - invalid; cannot be used in the middle of an event descriptor
- ❌ ~~`*.click`~~ - invalid; cannot be used in the prefix of an event descriptor
- ❌ ~~`mouse.click*`~~ - invalid; does not match any event
- ❌ ~~`mouse.*.*`~~ - invalid; cannot be used in the middle of an event descriptor

## Other transitions

- Eventless (always) transitions - LINK
- Delayed (after) transitions - LINK

## Shorthands

If the transition only specifies a `target`, then the string target can be used as a shorthand instead of the entire transition object:

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'prompt',
  states: {
    prompt: {
      on: {
        // highlight-start
        // This is shorthand for:
        // 'feedback': { target: 'form' }
        'feedback.good': 'thanks',
        // highlight-end
      },
    },
    thanks: {},
    // ...
  },
});
```

This is useful for quickly prototyping state machines. It is recommended to use the full transition object syntax, as it will be consistent with all other transition objects and will be easier to add actions, guards, and other properties to the transition in the future.

## Transition descriptions

## TypeScript

## Cheatsheet

## Resources
