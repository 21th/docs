---
title: 'Migrating from XState v4 to v5'
---

Following our guide below, migrating from XState version 4 to version 5 should be straightforward. If you get stuck or have any questions, please reach out to the Stately team on [our Discord](https://discord.gg/xstate).

This guide is for users who want to update their codebase from v4 to v5 and should also be valuable for any developers wanting to know the differences between v4 and v5.

## Breaking changes

`Machine` to `createMachine`

`cond` is now `guard`

Single-argument functions

`(context, event)` => `({ context, event })`

`actor.onTransition` is removed; use `actor.subscribe` instead

`send` is deprecated; use `raise` or `sendTo` instead

`internal: false` is now `reenter: true`

`interpret(machine).start(state)` is now `interpret(machine, { state }).start()`

`actor.send(eventObject)` no longer accepts a string; must pass full event object `{ type: '...' }`

No more null events; use `always`

2nd argument to `createMachine` is deprecated: `createMachine(config, options)` is now `createMachine(config).provide(options)`

No more `.withConfig()`; use `.provide()` instead

No more `.withContext()`; use [input](#todo) instead

Actions are now in predictable order

No strict mode

`state.history` is removed

Batched events `actor.batch([...])` is removed

`config.schema` is now `config.types`

`config.tsTypes` is now in `config.types.typegen`

No more `in: '...'` guards; use `stateIn(...)` instead

Properties on action and guard objects other than `type` should be nested under a `params` object; `{ type: 'someType', message: 'hello' }` becomes `{ type: 'someType', params: { message: 'hello' }}`

## New features

Higher-level guards: `and`, `or`, `not`

Partial event wildcards: `on({ 'foo.*': ... })`
