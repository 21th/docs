---
deps: [guards]
group: reference
---

A **condition function** (also known as a **guard**) specified on the `.cond` property of a transition, as a string or condition object with a `{ type: '...' }` property, and takes 3 arguments:

| Argument   | Type   | Description                            |
| ---------- | ------ | -------------------------------------- |
| `context`  | object | the [machine context](./context.md)    |
| `event`    | object | the event that triggered the condition |
| `condMeta` | object | meta data (see below)                  |

The `condMeta` object includes the following properties:

- `cond` - the original condition object
- `state` - the current machine state, before transition
- `_event` - the SCXML event

**Returns**

`true` or `false`, which determines whether the transition should be allowed to take place.

```js {15-16,30-34}
const searchValid = (context, event) => {
  return context.canSearch && event.query && event.query.length > 0;
};

const searchMachine = createMachine(
  {
    id: "search",
    initial: "idle",
    context: {
      canSearch: true,
    },
    states: {
      idle: {
        on: {
          SEARCH: [
            {
              target: "searching",
              // Only transition to 'searching' if the guard (cond) evaluates to true
              cond: searchValid, // or { type: 'searchValid' }
            },
            { target: ".invalid" },
          ],
        },
        initial: "normal",
        states: {
          normal: {},
          invalid: {},
        },
      },
      searching: {
        entry: "executeSearch",
        // ...
      },
      searchError: {
        // ...
      },
    },
  },
  {
    guards: {
      searchValid, // optional, if the implementation doesn't change
    },
  },
);
```

Click the _EVENTS_ tab and send an event like `{ "type": "SEARCH", "query": "something" }` below:

<iframe src="https://stately.ai/viz/embed/?gist=09af23963bfa1767ce3900f2ae730029&tab=events"></iframe>

If the `cond` guard returns `false`, then the transition will not be selected, and no transition will take place from that state node. If all transitions in a child state have guards that evaluate to `false` and prevent them from being selected, the `event` will be propagated up to the parent state and handled there.

Example of usage with `context`:

```js
import { interpret } from "xstate";

const searchService = interpret(searchMachine)
  .onTransition((state) => console.log(state.value))
  .start();

searchService.send({ type: "SEARCH", query: "" });
// => 'idle'

searchService.send({ type: "SEARCH", query: "something" });
// => 'searching'
```

{/* ::: tip \ */}

Guard implementations can be quickly prototyped by specifying the guard `cond` function inline, directly in the machine config:

```js {4}
// ...
SEARCH: {
  target: 'searching',
  cond: (context, event) => context.canSearch && event.query && event.query.length > 0
}
// ...
```

Refactoring inline guard implementations in the `guards` property of the machine options makes it easier to debug, serialize, test, and accurately visualize guards.

{/* ::: (end tip/warning) \ */}
