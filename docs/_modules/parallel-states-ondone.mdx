---
deps: ["parallel-states", "state-done-events"]
group: deep-dive-states
status: complete # in-progress, complete
needs: # content, tech-review, copy-review
---

When every child state node in a parallel state node is _done_, the parent parallel state node is also _done_. When every final state node in every child compound node is reached, the `done` event will be fired for the parallel state node.

`onDone` is very useful in modeling parallel tasks. For example, below there is a shopping machine where `user` and `items` represent two parallel tasks of the `cart` state:

```ts twoslash
import { createMachine } from "xstate";

const shoppingMachine = createMachine({
  initial: "cart",
  states: {
    cart: {
      type: "parallel",
      states: {
        user: {
          initial: "pending",
          states: {
            pending: {
              entry: "getUser",
              on: {
                RESOLVE_USER: { target: "success" },
                REJECT_USER: { target: "failure" },
              },
            },
            success: { type: "final" },
            failure: {},
          },
        },
        items: {
          initial: "pending",
          states: {
            pending: {
              entry: "getItems",
              on: {
                RESOLVE_ITEMS: { target: "success" },
                REJECT_ITEMS: { target: "failure" },
              },
            },
            success: { type: "final" },
            failure: {},
          },
        },
      },
      onDone: "confirm",
    },
    confirm: {},
  },
});
```

The `onDone` transition will only happen when all of the child states of `cart` (e.g., `user` and `items`) are in their final states. In the case of the shopping machine, once the `shopping.cart.user.success` and `shopping.cart.items.success` state nodes are reached, the machine will transition from the `cart` to the `confirm` state.
