---
deps:
  ["states", "running-machines-intro", "actions", "context"]
group: running-machines
status: complete # in-progress, complete
needs: # content, tech-review, copy-review
---

When running your machine, you’ll want to query the machine to understand which state it’s in. When you run a machine using `interpret`, you can find the state as follows:

```ts twoslash
import { createMachine, interpret } from "xstate";

const machine = createMachine({});

// ---cut---

const service = interpret(machine).start();

const state = service.state;
```

You can also get an updated version when you subscribe to the state:

```ts twoslash
import { createMachine, interpret } from "xstate";

const machine = createMachine({});

const service = interpret(machine).start();

// ---cut---

service.subscribe((state) => {
  console.log(state);
});
```

This `State` class has a bunch of useful attributes and methods.

### Context

First, you can find the state’s context using `state.context`.

```ts twoslash
import { createMachine, interpret, assign } from "xstate";

const machine = createMachine(
  {
    context: {
      count: 0,
    },
    on: {
      INCREMENT: {
        actions: "incrementCount",
      },
    },
  },
  {
    actions: {
      incrementCount: assign((context) => {
        return {
          count: context.count + 1,
        };
      }),
    },
  },
);

const service = interpret(machine).start();

service.subscribe((state) => {
  console.log(state.context.count);
});

service.send({ type: "INCREMENT" });
```

### `state.matches`

You can query which state the machine is in by running `state.matches()`. `state.matches()` returns a boolean depending on whether you’re in a matching state.

```ts twoslash
import { createMachine, interpret, assign } from "xstate";

const machine = createMachine({
  initial: "toggledOff",
  states: {
    toggledOff: {
      on: {
        TOGGLE: "toggledOn",
      },
    },
    toggledOn: {
      on: {
        TOGGLE: "toggledOff",
      },
    },
  },
});

const service = interpret(machine).start();

service.subscribe((state) => {
  const isToggledOn = state.matches("toggledOn");

  console.log(isToggledOn); // true / false
  console.log(state.value); // 'toggledOn' / 'toggledOff'
});
```

You can also use `state.value` to check your machine’s state, but we recommend using `state.matches` because of how it works with hierarchical states. We’ll talk more about hierarchical states later. [Fast track to hierarchical states](/path-to/state.matches-in-hierarchical-states).

### Changed

You can check if a state was _changed_ by the most recently received event. The state was changed if:

1. There was a change in `state.value`. For example, moving from `toggledOn` to `toggledOff`.
2. A value in context was changed.
