---
deps: ["states", "transitions-and-events"]
group: deep-dive-states
status: complete # in-progress, complete
needs: # content, tech-review, copy-review
---

A **hierarchical state** is a state that can contain more states, also known as child states. These child states can only happen when the parent hierarchical state is happening. Inside the **on a walk** state, there could be the child states of **walking**, **running** and **stopping to sniff good smells**.

A hierarchical state is symbolized by a labeled rounded rectangle box that acts as a container for its child states.

{/* no alt because the image is already described in the surrounding text \ */}

![](/hierarchical-state.svg)

A hierarchical state must also specify which child state is the initial state. In the **on a walk** hierarchical state, the initial state is **walking**.

In XState, you can specify a hierarchical state using the `states` attribute on child nodes:

```ts twoslash
import { createMachine } from "xstate";

const machine = createMachine({
  initial: "waiting",
  states: {
    waiting: {
      on: {
        "leave home": {
          target: "on a walk",
        },
      },
    },
    "on a walk": {
      initial: "walking",
      on: {
        "arrive home": {
          target: "walk complete",
        },
      },
      states: {
        walking: {
          on: {
            "speed up": {
              target: "running",
            },
            stop: {
              target: "stopping to sniff good smells",
            },
          },
        },
        running: {
          on: {
            "slow down": {
              target: "walking",
            },
          },
        },
        "stopping to sniff good smells": {
          on: {
            "speed up": {
              target: "walking",
            },
          },
        },
      },
    },
    "walk complete": {},
  },
});
```

Note in the example above that transitions can be marked at different levels of the state hierarchy. In this example, the machine can receive the `arrive home` event in any of the child states inside `on a walk`.

However, the machine can only receive the `stop` event inside `on a walk.walking`. Events can be handled differently at different levels of the statechart, which is powerful for handling complex requirements.
